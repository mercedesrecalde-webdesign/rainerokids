<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
  <title>Rainero Kids - Culinaria 4.0</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#7B2D8E">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --violet:#7B2D8E;--violet-light:#9B4DB8;--violet-dark:#5A1F6A;
  --green:#7AB929;--green-light:#9AD649;--green-dark:#5A8A1F;
  --teal:#00A19A;--teal-light:#00C4BC;
  --orange:#F59E0B;--orange-dark:#D97706;
  --red:#EF4444;--blue:#3B82F6;
  --grad-main:linear-gradient(135deg,#7B2D8E 0%,#00A19A 50%,#7AB929 100%);
  --grad-violet:linear-gradient(135deg,#7B2D8E,#9B4DB8);
  --grad-teal:linear-gradient(135deg,#00A19A,#00C4BC);
  --grad-green:linear-gradient(135deg,#7AB929,#9AD649);
  --grad-orange:linear-gradient(135deg,#F59E0B,#D97706);
  --bg:#F8FAFC;--card:#FFF;--text:#1E293B;--text-sec:#64748B;--text-light:#94A3B8;--border:#E2E8F0;
  --shadow:0 4px 20px rgba(123,45,142,0.08);--shadow-lg:0 12px 40px rgba(123,45,142,0.12);
  --radius:12px;--radius-lg:16px;--radius-xl:24px;--radius-full:9999px;
  --safe-bottom:env(safe-area-inset-bottom)
}
body{font-family:'Plus Jakarta Sans',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100dvh;line-height:1.5;-webkit-font-smoothing:antialiased}
h1,h2,h3,h4{font-family:'Fredoka',sans-serif;font-weight:600}
.hidden{display:none!important}

/* Professional Avatars */
.avatar{width:56px;height:56px;border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
.avatar.sm{width:40px;height:40px;border-radius:var(--radius)}
.avatar.lg{width:72px;height:72px;border-radius:20px}
.avatar.xl{width:88px;height:88px;border-radius:24px}
.avatar-kids{background:linear-gradient(145deg,#34D399,#10B981);box-shadow:0 4px 12px rgba(16,185,129,0.3)}
.avatar-teens{background:linear-gradient(145deg,#A78BFA,#8B5CF6);box-shadow:0 4px 12px rgba(139,92,246,0.3)}
.avatar-parents{background:linear-gradient(145deg,#5EEAD4,#14B8A6);box-shadow:0 4px 12px rgba(20,184,166,0.3)}
.avatar-docente{background:linear-gradient(145deg,#FBBF24,#F59E0B);box-shadow:0 4px 12px rgba(245,158,11,0.3)}
.avatar-chef{background:linear-gradient(145deg,#00C4BC,#00A19A);box-shadow:0 4px 12px rgba(0,161,154,0.3)}
.avatar svg{width:55%;height:55%}
.avatar-initials{font-weight:700;color:white;font-size:1.1rem;letter-spacing:-0.5px}
.avatar.lg .avatar-initials{font-size:1.5rem}
.avatar-badge{position:absolute;bottom:-2px;right:-2px;width:20px;height:20px;background:var(--card);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.7rem;box-shadow:0 2px 4px rgba(0,0,0,0.1)}

/* Portal */
.portal{min-height:100dvh;background:var(--grad-main);display:flex;flex-direction:column;position:relative;overflow:hidden}
.portal::before{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5L35 15L45 17L38 25L40 35L30 30L20 35L22 25L15 17L25 15L30 5Z' fill='%23fff' fill-opacity='0.03'/%3E%3C/svg%3E");pointer-events:none}
.portal-header{padding:16px 20px;display:flex;justify-content:flex-end;z-index:10}
.mvl-badge{display:flex;align-items:center;background:rgba(255,255,255,0.95);padding:10px 18px;border-radius:var(--radius-full);box-shadow:var(--shadow)}
.mvl-badge img{height:28px}
.portal-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;z-index:10}
.logo-hero{width:120px;height:120px;border-radius:50%;object-fit:cover;box-shadow:var(--shadow-lg),0 0 0 4px rgba(255,255,255,0.2);margin-bottom:24px;animation:float 4s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
.portal-title{text-align:center;color:white;margin-bottom:32px}
.portal-title h1{font-size:2.4rem;margin-bottom:6px;text-shadow:0 2px 20px rgba(0,0,0,0.2);letter-spacing:-0.5px}
.portal-title p{font-size:1.05rem;opacity:0.9;font-weight:500}
.portal-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;max-width:400px;width:100%}
.portal-btn{background:white;border-radius:var(--radius-xl);padding:24px 16px;text-align:center;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);border:none;box-shadow:var(--shadow)}
.portal-btn:hover{transform:translateY(-6px);box-shadow:var(--shadow-lg)}
.portal-btn:active{transform:scale(0.98)}
.portal-btn .avatar{margin:0 auto 14px}
.portal-btn h3{font-size:1rem;color:var(--text);margin-bottom:4px}
.portal-btn span{font-size:0.8rem;color:var(--text-sec);font-weight:500}
.portal-footer{padding:20px;text-align:center;z-index:10}
.portal-footer p{color:rgba(255,255,255,0.75);font-size:0.8rem}

/* Login */
.login{min-height:100dvh;display:flex;align-items:center;justify-content:center;padding:24px;background:var(--bg)}
.login.kids-bg{background:linear-gradient(180deg,#ECFDF5 0%,#D1FAE5 100%)}
.login.teens-bg{background:linear-gradient(180deg,#EDE9FE 0%,#DDD6FE 100%)}
.login.parents-bg{background:linear-gradient(180deg,#F0FDFA 0%,#CCFBF1 100%)}
.login.docente-bg{background:linear-gradient(180deg,#FFFBEB 0%,#FEF3C7 100%)}
.login-card{background:var(--card);border-radius:var(--radius-xl);padding:36px 28px;width:100%;max-width:400px;box-shadow:var(--shadow-lg)}
.login-header{text-align:center;margin-bottom:32px}
.login-header .avatar{margin:0 auto 18px}
.login-header h2{font-size:1.6rem;margin-bottom:6px}
.login-header h2.green{color:var(--green-dark)}.login-header h2.violet{color:#7C3AED}.login-header h2.teal{color:#0D9488}.login-header h2.orange{color:var(--orange-dark)}
.login-header p{color:var(--text-sec);font-size:0.95rem}
.form-group{margin-bottom:18px}
.form-group label{display:block;font-size:0.85rem;font-weight:600;color:var(--text);margin-bottom:8px}
.form-group input,.form-group select,.form-group textarea{width:100%;padding:14px 18px;border:2px solid var(--border);border-radius:var(--radius);font-size:1rem;font-family:inherit;transition:all 0.2s;background:var(--bg)}
.form-group input:focus,.form-group select:focus{outline:none;border-color:var(--violet);background:white;box-shadow:0 0 0 4px rgba(123,45,142,0.1)}
.form-group textarea{resize:vertical;min-height:100px}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:16px 28px;border-radius:var(--radius);font-size:1rem;font-weight:600;cursor:pointer;border:none;width:100%;transition:all 0.2s}
.btn:hover{transform:translateY(-2px)}
.btn-green{background:var(--grad-green);color:white;box-shadow:0 4px 15px rgba(122,185,41,0.35)}
.btn-violet{background:var(--grad-violet);color:white;box-shadow:0 4px 15px rgba(123,45,142,0.35)}
.btn-teal{background:var(--grad-teal);color:white;box-shadow:0 4px 15px rgba(0,161,154,0.35)}
.btn-orange{background:var(--grad-orange);color:white;box-shadow:0 4px 15px rgba(245,158,11,0.35)}
.btn-outline{background:transparent;border:2px solid var(--border);color:var(--text);box-shadow:none}
.btn-outline:hover{border-color:var(--violet);color:var(--violet)}
.btn-sm{padding:10px 18px;font-size:0.9rem}
.btn-icon{width:44px;height:44px;padding:0;border-radius:50%}
.back-btn{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:24px;color:var(--text-sec);font-size:0.95rem;cursor:pointer;background:none;border:none;width:100%;padding:10px;transition:all 0.2s}
.back-btn:hover{color:var(--violet)}

/* App Shell */
.app{min-height:100dvh;display:flex;flex-direction:column;background:var(--bg);padding-bottom:calc(72px + var(--safe-bottom))}
.app.teens-theme{background:#0F172A;color:white}
.app-header{position:sticky;top:0;z-index:100;padding:12px 18px;display:flex;align-items:center;gap:12px;background:white;border-bottom:1px solid var(--border)}
.app.teens-theme .app-header{background:rgba(15,23,42,0.95);border-color:rgba(255,255,255,0.08);backdrop-filter:blur(10px)}
.header-back{width:40px;height:40px;border-radius:var(--radius);display:flex;align-items:center;justify-content:center;background:var(--bg);border:none;cursor:pointer;transition:all 0.2s}
.header-back:hover{background:var(--border)}
.header-back svg{width:20px;height:20px;stroke:var(--text);stroke-width:2.5;fill:none}
.app.teens-theme .header-back{background:rgba(255,255,255,0.08)}
.app.teens-theme .header-back svg{stroke:white}
.header-logo{width:36px;height:36px;border-radius:var(--radius);object-fit:cover}
.header-title{flex:1;font-size:1.1rem}
.app.teens-theme .header-title{background:linear-gradient(90deg,#00CEC9,#7AB929);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.header-points{display:flex;align-items:center;gap:6px;padding:8px 16px;background:linear-gradient(135deg,#FEF3C7,#FDE68A);border-radius:var(--radius-full);font-weight:700;font-size:0.9rem;color:var(--orange-dark)}
.app.teens-theme .header-points{background:linear-gradient(135deg,rgba(0,206,201,0.2),rgba(122,185,41,0.2));color:#00CEC9}
.app-main{flex:1;padding:18px;max-width:800px;margin:0 auto;width:100%}
.app-nav{position:fixed;bottom:0;left:0;right:0;background:white;border-top:1px solid var(--border);padding:8px 16px;padding-bottom:calc(8px + var(--safe-bottom));display:flex;justify-content:space-around;z-index:100}
.app.teens-theme .app-nav{background:rgba(15,23,42,0.98);border-color:rgba(255,255,255,0.08)}
.nav-btn{display:flex;flex-direction:column;align-items:center;gap:3px;padding:10px 16px;border-radius:var(--radius);background:none;border:none;cursor:pointer;color:var(--text-light);font-size:0.65rem;font-weight:600;transition:all 0.2s}
.nav-btn svg{width:24px;height:24px;stroke-width:2;fill:none}
.nav-btn.active{color:var(--violet);background:rgba(123,45,142,0.08)}
.app.teens-theme .nav-btn{color:rgba(255,255,255,0.4)}
.app.teens-theme .nav-btn.active{color:#00CEC9;background:rgba(0,206,201,0.12)}

/* Cards */
.card{background:var(--card);border-radius:var(--radius-lg);padding:20px;box-shadow:0 1px 3px rgba(0,0,0,0.04);margin-bottom:16px;border:1px solid var(--border)}
.app.teens-theme .card{background:rgba(255,255,255,0.04);border-color:rgba(255,255,255,0.06)}
.welcome-card{display:flex;align-items:center;gap:16px;background:var(--grad-main);color:white;border:none;box-shadow:var(--shadow-lg)}
.welcome-card .avatar{box-shadow:0 4px 12px rgba(0,0,0,0.2)}
.welcome-info h2{font-size:1.2rem;margin-bottom:4px}
.welcome-info p{opacity:0.9;font-size:0.9rem;margin-bottom:8px}
.level-tag{display:inline-flex;align-items:center;gap:5px;background:rgba(255,255,255,0.2);padding:6px 14px;border-radius:var(--radius-full);font-size:0.8rem;font-weight:600;backdrop-filter:blur(4px)}

.vicente-tip{display:flex;align-items:center;gap:14px;cursor:pointer;border-left:4px solid var(--violet);transition:all 0.2s}
.vicente-tip:hover{transform:translateX(4px)}
.vicente-tip img{width:54px;height:54px;border-radius:50%;object-fit:cover;box-shadow:0 4px 12px rgba(123,45,142,0.2)}
.vicente-tip-content{flex:1}
.vicente-tip-label{font-size:0.7rem;font-weight:700;color:var(--violet);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px}
.vicente-tip h3{font-size:0.95rem;margin-bottom:3px}
.vicente-tip p{font-size:0.8rem;color:var(--text-sec)}
.tip-tag{padding:6px 12px;border-radius:var(--radius-full);font-size:0.7rem;font-weight:700;background:#ECFDF5;color:var(--green)}

.stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:16px}
.stat-item{background:var(--card);border-radius:var(--radius);padding:14px 8px;text-align:center;border:1px solid var(--border)}
.app.teens-theme .stat-item{background:rgba(255,255,255,0.04);border-color:rgba(255,255,255,0.06)}
.stat-item svg{width:26px;height:26px;margin:0 auto 6px;stroke:var(--violet);stroke-width:2;fill:none}
.stat-item .value{font-size:1.2rem;font-weight:700;color:var(--violet)}
.stat-item .label{font-size:0.7rem;color:var(--text-sec);margin-top:2px}
.app.teens-theme .stat-item .value{color:#00CEC9}
.app.teens-theme .stat-item svg{stroke:#00CEC9}

.section{margin-bottom:24px}
.section-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
.section-title{font-size:1.05rem}
.section-link{font-size:0.85rem;color:var(--violet);font-weight:600;cursor:pointer;background:none;border:none}

/* Recipes */
.recipe-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
.recipe-card{background:var(--card);border-radius:var(--radius-lg);overflow:hidden;cursor:pointer;transition:all 0.25s;border:1px solid var(--border)}
.recipe-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}
.recipe-img{height:110px;display:flex;align-items:center;justify-content:center;position:relative}
.recipe-emoji{font-size:2.8rem}
.recipe-badge{position:absolute;top:10px;right:10px;padding:5px 10px;border-radius:8px;font-size:0.7rem;font-weight:700;color:white}
.recipe-badge.easy{background:var(--green)}.recipe-badge.medium{background:var(--orange)}.recipe-badge.hard{background:var(--red)}
.recipe-info{padding:14px}
.recipe-info h3{font-size:0.95rem;margin-bottom:6px;line-height:1.3}
.recipe-meta{display:flex;align-items:center;gap:10px;font-size:0.75rem;color:var(--text-sec);margin-bottom:10px}
.recipe-meta svg{width:14px;height:14px;stroke-width:2.5;fill:none;stroke:var(--text-sec)}
.recipe-points{display:inline-flex;align-items:center;gap:4px;font-size:0.8rem;font-weight:700;color:var(--orange);background:linear-gradient(135deg,#FEF3C7,#FDE68A);padding:5px 12px;border-radius:var(--radius-full)}

/* Modal */
.modal-overlay{position:fixed;inset:0;background:rgba(15,23,42,0.6);backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:flex-end;justify-content:center}
.modal{background:var(--card);border-radius:var(--radius-xl) var(--radius-xl) 0 0;width:100%;max-width:500px;max-height:92vh;overflow-y:auto;animation:slideUp 0.3s cubic-bezier(0.4,0,0.2,1)}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.modal-header{position:sticky;top:0;background:var(--card);padding:18px 22px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;z-index:10}
.modal-header h2{font-size:1.15rem}
.modal-close{width:40px;height:40px;border-radius:var(--radius);background:var(--bg);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s}
.modal-close:hover{background:var(--border)}
.modal-close svg{width:20px;height:20px;stroke:var(--text-sec);fill:none}
.modal-body{padding:22px}
.modal-img{width:100%;height:200px;border-radius:var(--radius-lg);margin-bottom:18px;display:flex;align-items:center;justify-content:center}
.modal-img .recipe-emoji{font-size:4.5rem}
.recipe-detail-meta{display:flex;gap:18px;margin-bottom:22px}
.recipe-detail-meta .meta-item{display:flex;align-items:center;gap:8px;font-size:0.9rem;color:var(--text-sec)}
.recipe-detail-meta svg{width:20px;height:20px;stroke:var(--violet);fill:none}
.recipe-section{margin-bottom:22px}
.recipe-section h3{font-size:0.95rem;color:var(--violet);margin-bottom:12px;display:flex;align-items:center;gap:8px}
.recipe-section h3 svg{width:18px;height:18px}
.ingredient-list{list-style:none}
.ingredient-list li{padding:10px 0;border-bottom:1px solid var(--border);font-size:0.95rem;display:flex;align-items:center;gap:12px}
.ingredient-list li:last-child{border:none}
.ingredient-check{width:22px;height:22px;border-radius:50%;border:2px solid var(--border);cursor:pointer;transition:all 0.2s;flex-shrink:0}
.ingredient-check:hover{border-color:var(--green)}
.ingredient-check.checked{background:var(--green);border-color:var(--green)}
.step-list{counter-reset:step}
.step-item{display:flex;gap:14px;margin-bottom:18px}
.step-number{width:32px;height:32px;border-radius:50%;background:var(--grad-violet);color:white;display:flex;align-items:center;justify-content:center;font-size:0.85rem;font-weight:700;flex-shrink:0}
.step-content{flex:1;font-size:0.95rem;line-height:1.6;padding-top:5px}
.step-tip{background:linear-gradient(135deg,#FEF3C7,#FDE68A);padding:10px 12px;border-radius:var(--radius);margin-top:8px;font-size:0.85rem;color:var(--orange-dark)}
.modal-footer{padding:18px 22px;border-top:1px solid var(--border);background:var(--bg)}

/* Recipe Form */
.recipe-form{padding:22px}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.form-section{margin-bottom:22px}
.form-section h4{font-size:0.9rem;color:var(--text-sec);margin-bottom:12px;font-weight:600}
.ingredient-input-row,.step-input-row{display:flex;gap:10px;margin-bottom:10px}
.ingredient-input-row input,.step-input-row textarea{flex:1}
.step-input-row textarea{min-height:70px;width:100%;padding:14px;border:2px solid var(--border);border-radius:var(--radius);font-family:inherit;resize:vertical}
.step-input-row textarea:focus{outline:none;border-color:var(--violet)}
.image-upload{border:2px dashed var(--border);border-radius:var(--radius-lg);padding:32px;text-align:center;cursor:pointer;transition:all 0.2s}
.image-upload:hover{border-color:var(--violet);background:rgba(123,45,142,0.02)}
.image-upload svg{width:44px;height:44px;stroke:var(--text-light);fill:none;margin-bottom:10px}
.image-upload p{color:var(--text-sec);font-size:0.9rem}

/* Chat */
.chat-container{display:flex;flex-direction:column;height:calc(100dvh - 150px);background:var(--card);border-radius:var(--radius-xl);overflow:hidden;border:1px solid var(--border)}
.chat-header{padding:14px 16px;background:var(--grad-violet);display:flex;align-items:center;gap:12px;color:white}
.chat-header img{width:44px;height:44px;border-radius:50%;object-fit:cover;border:3px solid rgba(255,255,255,0.25)}
.chat-header-info h3{font-size:1rem}
.chat-header-info span{font-size:0.8rem;opacity:0.9}
.chat-status{width:10px;height:10px;background:#22C55E;border-radius:50%;margin-left:auto;box-shadow:0 0 0 3px rgba(34,197,94,0.3)}
.chat-messages{flex:1;padding:16px;overflow-y:auto;display:flex;flex-direction:column;gap:12px;background:#F8FAFC}
.msg{display:flex;gap:10px;max-width:85%}
.msg.bot{align-self:flex-start}
.msg.user{align-self:flex-end;flex-direction:row-reverse}
.msg-avatar{width:34px;height:34px;border-radius:50%;flex-shrink:0;object-fit:cover}
.msg.user .msg-avatar{background:var(--grad-teal);display:flex;align-items:center;justify-content:center}
.msg.user .msg-avatar svg{width:16px;height:16px;stroke:white;fill:none}
.msg-bubble{padding:12px 16px;border-radius:var(--radius-lg);font-size:0.9rem;line-height:1.5}
.msg.bot .msg-bubble{background:white;border:1px solid var(--border);border-bottom-left-radius:4px}
.msg.user .msg-bubble{background:var(--grad-teal);color:white;border-bottom-right-radius:4px}
.msg-tip{background:linear-gradient(135deg,#FEF3C7,#FDE68A);padding:10px 12px;border-radius:var(--radius);margin-top:8px;border-left:3px solid var(--orange)}
.msg-tip-label{font-size:0.7rem;font-weight:700;color:var(--orange-dark);margin-bottom:4px}
.chat-quick{padding:10px 16px;display:flex;gap:8px;overflow-x:auto;border-top:1px solid var(--border);background:white}
.quick-chip{padding:8px 14px;background:var(--bg);border:1px solid var(--border);border-radius:var(--radius-full);font-size:0.8rem;font-weight:500;cursor:pointer;white-space:nowrap;transition:all 0.2s}
.quick-chip:hover{background:var(--violet);color:white;border-color:var(--violet)}
.chat-input{padding:12px 16px;display:flex;gap:10px;border-top:1px solid var(--border);background:white}
.chat-input input{flex:1;padding:12px 16px;border:1px solid var(--border);border-radius:var(--radius-full);font-size:0.95rem;font-family:inherit}
.chat-input input:focus{outline:none;border-color:var(--violet)}
.chat-input button{width:44px;height:44px;border-radius:50%;background:var(--grad-violet);color:white;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center}
.chat-input button svg{width:20px;height:20px;stroke:white;fill:none}

/* Gallery */
.gallery-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.gallery-item{aspect-ratio:1;border-radius:var(--radius);display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;font-size:2rem;transition:all 0.2s}
.gallery-item:hover{transform:scale(1.03)}
.gallery-item img{width:100%;height:100%;object-fit:cover}
.gallery-item.add{background:var(--bg);border:2px dashed var(--border);flex-direction:column;gap:6px;color:var(--text-sec);font-size:0.75rem}
.gallery-item.add svg{width:28px;height:28px;stroke:currentColor;fill:none}
.gallery-item.add:hover{border-color:var(--violet);color:var(--violet)}

/* Videos */
.video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:12px}
.video-card{background:var(--card);border-radius:var(--radius-lg);overflow:hidden;cursor:pointer;border:1px solid var(--border);transition:all 0.2s}
.video-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}
.video-thumb{height:100px;display:flex;align-items:center;justify-content:center;position:relative}
.video-play{width:44px;height:44px;background:rgba(255,255,255,0.95);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,0.15)}
.video-play svg{width:20px;height:20px;stroke:var(--violet);fill:none;margin-left:3px}
.video-duration{position:absolute;bottom:8px;right:8px;background:rgba(0,0,0,0.75);color:white;padding:3px 8px;border-radius:6px;font-size:0.7rem;font-weight:600}
.video-info{padding:12px}
.video-info h3{font-size:0.85rem;margin-bottom:4px}
.video-info p{font-size:0.75rem;color:var(--text-sec)}
.video-vicente{display:inline-flex;align-items:center;gap:6px;margin-top:8px;font-size:0.75rem;color:var(--violet);font-weight:600}
.video-vicente img{width:18px;height:18px;border-radius:50%}

.tabs{display:flex;gap:8px;margin-bottom:16px;overflow-x:auto}
.tab{padding:10px 18px;border-radius:var(--radius-full);background:var(--bg);border:1px solid var(--border);font-size:0.85rem;font-weight:600;cursor:pointer;white-space:nowrap;transition:all 0.2s}
.tab:hover{border-color:var(--violet)}
.tab.active{background:var(--grad-violet);color:white;border-color:transparent}

.vicente-float{position:fixed;bottom:calc(80px + var(--safe-bottom));right:18px;width:56px;height:56px;border-radius:50%;background:white;box-shadow:0 8px 24px rgba(123,45,142,0.25);cursor:pointer;z-index:90;display:flex;align-items:center;justify-content:center;border:3px solid var(--violet);transition:all 0.3s}
.vicente-float img{width:42px;height:42px;border-radius:50%;object-fit:cover}
.vicente-float:hover{transform:scale(1.1)}
.vicente-float .dot{position:absolute;top:-3px;right:-3px;width:14px;height:14px;background:var(--red);border-radius:50%;border:3px solid white}

/* Docente */
.docente-stats{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:16px}
.docente-stat{background:var(--card);border-radius:var(--radius-lg);padding:18px;border:1px solid var(--border)}
.docente-stat svg{width:32px;height:32px;stroke:var(--violet);fill:none;margin-bottom:10px}
.docente-stat .value{font-size:1.8rem;font-weight:700}
.docente-stat .label{font-size:0.8rem;color:var(--text-sec);margin-top:2px}

.action-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px}
.action-btn{background:var(--card);border-radius:var(--radius-lg);padding:18px 12px;text-align:center;cursor:pointer;border:1px solid var(--border);transition:all 0.2s}
.action-btn:hover{border-color:var(--violet);transform:translateY(-3px);box-shadow:var(--shadow)}
.action-btn svg{width:28px;height:28px;stroke:var(--violet);fill:none;margin:0 auto 8px}
.action-btn span{font-size:0.75rem;font-weight:600;color:var(--text-sec)}

.student-list,.message-list{display:flex;flex-direction:column;gap:10px}
.student-item,.message-item{display:flex;align-items:center;gap:12px;background:var(--card);border-radius:var(--radius);padding:12px;border:1px solid var(--border);cursor:pointer;transition:all 0.2s}
.student-item:hover,.message-item:hover{border-color:var(--violet)}
.student-info,.message-content{flex:1;min-width:0}
.student-info h4,.message-content h4{font-size:0.9rem}
.student-info p,.message-content p{font-size:0.75rem;color:var(--text-sec)}
.message-content p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.student-stats{display:flex;gap:12px;font-size:0.8rem;color:var(--text-sec)}
.message-time{font-size:0.7rem;color:var(--text-light);white-space:nowrap}
.message-item.unread{border-left:4px solid var(--violet);background:linear-gradient(90deg,rgba(123,45,142,0.04),transparent)}

.upload-area{border:2px dashed var(--border);border-radius:var(--radius-lg);padding:36px;text-align:center;cursor:pointer;transition:all 0.2s}
.upload-area:hover{border-color:var(--violet);background:rgba(123,45,142,0.02)}
.upload-area svg{width:36px;height:36px;stroke:var(--text-light);fill:none;margin-bottom:10px}
.upload-area p{color:var(--text-sec);font-size:0.9rem}

/* Parents */
.child-card{background:var(--card);border-radius:var(--radius-lg);padding:20px;border:1px solid var(--border);margin-bottom:16px}
.child-header{display:flex;align-items:center;gap:14px;margin-bottom:16px}
.child-info h3{font-size:1.05rem;margin-bottom:6px}
.child-level{display:inline-flex;align-items:center;gap:5px;background:var(--grad-violet);color:white;padding:5px 12px;border-radius:var(--radius-full);font-size:0.75rem;font-weight:600}
.child-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:16px}
.child-stat{text-align:center;padding:12px 8px;background:var(--bg);border-radius:var(--radius)}
.child-stat .value{font-size:1.15rem;font-weight:700;color:var(--teal)}
.child-stat .label{font-size:0.7rem;color:var(--text-sec);margin-top:2px}

.program-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}
.program-card{background:var(--card);border-radius:var(--radius-lg);overflow:hidden;border:1px solid var(--border);cursor:pointer;transition:all 0.2s}
.program-card:hover{transform:translateY(-3px);box-shadow:var(--shadow)}
.program-banner{height:80px;display:flex;align-items:center;justify-content:center;position:relative}
.program-banner svg{width:36px;height:36px;stroke:white;fill:none}
.program-banner.summer{background:linear-gradient(135deg,#FBBF24,#F97316)}
.program-banner.winter{background:linear-gradient(135deg,#60A5FA,#8B5CF6)}
.program-tag{position:absolute;top:8px;right:8px;padding:4px 10px;border-radius:var(--radius-full);font-size:0.65rem;font-weight:700;background:rgba(255,255,255,0.95)}
.program-info{padding:14px}
.program-info h3{font-size:0.9rem;margin-bottom:4px}
.program-info p{font-size:0.75rem;color:var(--text-sec);margin-bottom:8px}
.program-dates{font-size:0.75rem;display:flex;align-items:center;gap:6px}

/* Missions */
.mission-list{display:flex;flex-direction:column;gap:10px}
.mission-item{display:flex;align-items:center;gap:12px;background:var(--card);border-radius:var(--radius);padding:14px;border:1px solid var(--border);cursor:pointer;transition:all 0.2s}
.mission-item:hover{border-color:var(--violet)}
.mission-icon{width:44px;height:44px;border-radius:var(--radius);display:flex;align-items:center;justify-content:center}
.mission-icon svg{width:22px;height:22px;fill:none}
.mission-icon.photo{background:linear-gradient(135deg,#FEE2E2,#FECACA)}.mission-icon.photo svg{stroke:var(--red)}
.mission-icon.cook{background:linear-gradient(135deg,#DBEAFE,#BFDBFE)}.mission-icon.cook svg{stroke:var(--blue)}
.mission-icon.trophy{background:linear-gradient(135deg,#FEF3C7,#FDE68A)}.mission-icon.trophy svg{stroke:var(--orange)}
.mission-info{flex:1}
.mission-info h4{font-size:0.9rem;margin-bottom:3px}
.mission-info p{font-size:0.75rem;color:var(--text-sec);margin-bottom:8px}
.mission-progress{height:5px;background:var(--border);border-radius:var(--radius-full);overflow:hidden}
.mission-progress-fill{height:100%;background:var(--grad-violet);border-radius:var(--radius-full)}
.mission-reward{text-align:center;min-width:50px}
.mission-reward .pts{font-size:1rem;font-weight:700;color:var(--violet)}
.mission-reward .lbl{font-size:0.6rem;color:var(--text-sec);text-transform:uppercase}

/* Loading */
.loading{display:flex;align-items:center;justify-content:center;padding:40px}
.loading-spinner{width:40px;height:40px;border:3px solid var(--border);border-top-color:var(--violet);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Toast */
.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%);background:var(--text);color:white;padding:14px 24px;border-radius:var(--radius);font-size:0.9rem;font-weight:500;z-index:2000;animation:toastIn 0.3s}
@keyframes toastIn{from{opacity:0;transform:translateX(-50%) translateY(20px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}

/* Responsive */
@media(max-width:400px){
  .portal-grid{gap:12px}.portal-btn{padding:20px 12px}.logo-hero{width:100px;height:100px}.portal-title h1{font-size:2rem}
  .stats-row,.child-stats{grid-template-columns:repeat(2,1fr)}.action-grid{grid-template-columns:repeat(2,1fr)}.form-row{grid-template-columns:1fr}
  .recipe-grid{gap:10px}.gallery-grid{grid-template-columns:repeat(2,1fr)}
}
  </style>
</head>
<body>

<!-- Professional SVG Icons -->
<svg style="display:none"><defs>
<!-- Avatar illustrations - more detailed and professional -->
<symbol id="av-child" viewBox="0 0 100 100">
  <circle cx="50" cy="38" r="22" fill="white" opacity="0.9"/>
  <circle cx="42" cy="35" r="3" fill="#1E293B"/>
  <circle cx="58" cy="35" r="3" fill="#1E293B"/>
  <path d="M43 45 Q50 52 57 45" stroke="#1E293B" stroke-width="2.5" fill="none" stroke-linecap="round"/>
  <path d="M30 30 Q35 15 50 12 Q65 15 70 30" stroke="white" stroke-width="8" fill="none" stroke-linecap="round"/>
  <ellipse cx="50" cy="75" rx="22" ry="15" fill="white" opacity="0.8"/>
</symbol>
<symbol id="av-teen" viewBox="0 0 100 100">
  <circle cx="50" cy="40" r="20" fill="white" opacity="0.9"/>
  <circle cx="43" cy="38" r="2.5" fill="#1E293B"/>
  <circle cx="57" cy="38" r="2.5" fill="#1E293B"/>
  <path d="M45 48 Q50 52 55 48" stroke="#1E293B" stroke-width="2" fill="none" stroke-linecap="round"/>
  <path d="M28 35 Q32 18 50 15 Q68 18 72 35" stroke="white" stroke-width="7" fill="none" stroke-linecap="round"/>
  <rect x="35" y="62" rx="8" width="30" height="28" fill="white" opacity="0.8"/>
  <path d="M65 72 L78 68" stroke="white" stroke-width="6" stroke-linecap="round" opacity="0.7"/>
</symbol>
<symbol id="av-family" viewBox="0 0 100 100">
  <circle cx="35" cy="35" r="15" fill="white" opacity="0.9"/>
  <circle cx="65" cy="35" r="15" fill="white" opacity="0.9"/>
  <circle cx="50" cy="70" r="12" fill="white" opacity="0.85"/>
  <circle cx="31" cy="33" r="2" fill="#1E293B"/><circle cx="39" cy="33" r="2" fill="#1E293B"/>
  <circle cx="61" cy="33" r="2" fill="#1E293B"/><circle cx="69" cy="33" r="2" fill="#1E293B"/>
  <circle cx="47" cy="68" r="1.5" fill="#1E293B"/><circle cx="53" cy="68" r="1.5" fill="#1E293B"/>
  <path d="M32 40 Q35 43 38 40" stroke="#1E293B" stroke-width="1.5" fill="none"/>
  <path d="M62 40 Q65 43 68 40" stroke="#1E293B" stroke-width="1.5" fill="none"/>
  <path d="M47 74 Q50 77 53 74" stroke="#1E293B" stroke-width="1.5" fill="none"/>
</symbol>
<symbol id="av-teacher" viewBox="0 0 100 100">
  <circle cx="50" cy="36" r="20" fill="white" opacity="0.9"/>
  <rect x="38" y="28" rx="2" width="24" height="10" fill="none" stroke="#1E293B" stroke-width="2"/>
  <circle cx="44" cy="33" r="4" fill="none" stroke="#1E293B" stroke-width="1.5"/>
  <circle cx="56" cy="33" r="4" fill="none" stroke="#1E293B" stroke-width="1.5"/>
  <line x1="38" y1="33" x2="32" y2="30" stroke="#1E293B" stroke-width="2"/>
  <line x1="62" y1="33" x2="68" y2="30" stroke="#1E293B" stroke-width="2"/>
  <path d="M45 46 Q50 50 55 46" stroke="#1E293B" stroke-width="2" fill="none"/>
  <path d="M32 28 Q38 12 50 10 Q62 12 68 28" stroke="white" stroke-width="6" fill="none"/>
  <rect x="32" y="60" rx="10" width="36" height="32" fill="white" opacity="0.8"/>
  <path d="M50 70 L50 85 M42 78 L58 78" stroke="#1E293B" stroke-width="2" stroke-linecap="round"/>
</symbol>
<symbol id="av-chef" viewBox="0 0 100 100">
  <ellipse cx="50" cy="25" rx="28" ry="18" fill="white" opacity="0.95"/>
  <circle cx="35" cy="20" r="8" fill="white"/>
  <circle cx="50" cy="15" r="10" fill="white"/>
  <circle cx="65" cy="20" r="8" fill="white"/>
  <circle cx="50" cy="50" r="18" fill="white" opacity="0.9"/>
  <circle cx="44" cy="48" r="2.5" fill="#1E293B"/>
  <circle cx="56" cy="48" r="2.5" fill="#1E293B"/>
  <path d="M45 57 Q50 62 55 57" stroke="#1E293B" stroke-width="2" fill="none" stroke-linecap="round"/>
  <rect x="35" y="70" rx="8" width="30" height="22" fill="white" opacity="0.8"/>
</symbol>
<!-- Line icons -->
<symbol id="i-home" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></symbol>
<symbol id="i-book" viewBox="0 0 24 24"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></symbol>
<symbol id="i-chat" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></symbol>
<symbol id="i-camera" viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></symbol>
<symbol id="i-video" viewBox="0 0 24 24"><polygon points="23,7 16,12 23,17"/><rect x="1" y="5" width="15" height="14" rx="2"/></symbol>
<symbol id="i-users" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></symbol>
<symbol id="i-upload" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17,8 12,3 7,8"/><line x1="12" y1="3" x2="12" y2="15"/></symbol>
<symbol id="i-calendar" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></symbol>
<symbol id="i-star" viewBox="0 0 24 24"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></symbol>
<symbol id="i-clock" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/></symbol>
<symbol id="i-flame" viewBox="0 0 24 24"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></symbol>
<symbol id="i-medal" viewBox="0 0 24 24"><circle cx="12" cy="8" r="7"/><polyline points="8.21,13.89 7,23 12,20 17,23 15.79,13.88"/></symbol>
<symbol id="i-trophy" viewBox="0 0 24 24"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18M4 22h16M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22M18 2H6v7a6 6 0 0 0 12 0V2Z"/></symbol>
<symbol id="i-plus" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></symbol>
<symbol id="i-x" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></symbol>
<symbol id="i-back" viewBox="0 0 24 24"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12,19 5,12 12,5"/></symbol>
<symbol id="i-send" viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22,2 15,22 11,13 2,9"/></symbol>
<symbol id="i-play" viewBox="0 0 24 24"><polygon points="5,3 19,12 5,21"/></symbol>
<symbol id="i-check" viewBox="0 0 24 24"><polyline points="20,6 9,17 4,12"/></symbol>
<symbol id="i-list" viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><circle cx="4" cy="6" r="1"/><circle cx="4" cy="12" r="1"/><circle cx="4" cy="18" r="1"/></symbol>
<symbol id="i-sun" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/></symbol>
<symbol id="i-snow" viewBox="0 0 24 24"><line x1="2" y1="12" x2="22" y2="12"/><line x1="12" y1="2" x2="12" y2="22"/><line x1="20" y1="16" x2="4" y2="8"/><line x1="20" y1="8" x2="4" y2="16"/></symbol>
<symbol id="i-edit" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></symbol>
<symbol id="i-trash" viewBox="0 0 24 24"><polyline points="3,6 5,6 21,6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></symbol>
</defs></svg>

<!-- PORTAL -->
<div id="portal" class="portal">
  <header class="portal-header"><div class="mvl-badge"><img src="logo_mvl.png" alt="MVL"></div></header>
  <main class="portal-content">
    <img src="logo.png" alt="Rainero Kids" class="logo-hero">
    <div class="portal-title"><h1>Rainero Kids</h1><p>Culinaria 4.0</p></div>
    <div class="portal-grid">
      <button class="portal-btn" onclick="showLogin('kids')"><div class="avatar lg avatar-kids"><svg><use href="#av-child"/></svg></div><h3>Ni√±os</h3><span>6-11 a√±os</span></button>
      <button class="portal-btn" onclick="showLogin('teens')"><div class="avatar lg avatar-teens"><svg><use href="#av-teen"/></svg></div><h3>Teens</h3><span>12-17 a√±os</span></button>
      <button class="portal-btn" onclick="showLogin('parents')"><div class="avatar lg avatar-parents"><svg><use href="#av-family"/></svg></div><h3>Padres</h3><span>Portal familiar</span></button>
      <button class="portal-btn" onclick="showLogin('docente')"><div class="avatar lg avatar-docente"><svg><use href="#av-teacher"/></svg></div><h3>Docente</h3><span>Administraci√≥n</span></button>
    </div>
  </main>
  <footer class="portal-footer"><p>Centro Municipal de Capacitaci√≥n Laboral Santiago Rainero</p></footer>
</div>

<!-- LOGINS -->
<div id="login-kids" class="login kids-bg hidden">
  <div class="login-card">
    <div class="login-header"><div class="avatar xl avatar-kids"><svg><use href="#av-chef"/></svg></div><h2 class="green">¬°Hola Chef!</h2><p>Vicente te est√° esperando</p></div>
    <div class="form-group"><label>Tu nombre de chef</label><input type="text" id="kids-user" placeholder="Ej: MartinaCocina"></div>
    <div class="form-group"><label>Contrase√±a secreta</label><input type="password" id="kids-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
    <button class="btn btn-green" onclick="login('kids')">Entrar a cocinar</button>
    <button class="back-btn" onclick="showPortal()"><svg style="width:18px;height:18px;stroke:currentColor;fill:none"><use href="#i-back"/></svg> Volver</button>
  </div>
</div>
<div id="login-teens" class="login teens-bg hidden">
  <div class="login-card">
    <div class="login-header"><div class="avatar xl avatar-teens"><svg><use href="#av-teen"/></svg></div><h2 class="violet">Level Up Chef</h2><p>Desbloquea nuevos desaf√≠os</p></div>
    <div class="form-group"><label>Usuario</label><input type="text" id="teens-user" placeholder="Tu usuario"></div>
    <div class="form-group"><label>Contrase√±a</label><input type="password" id="teens-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
    <button class="btn btn-violet" onclick="login('teens')">Ingresar</button>
    <button class="back-btn" onclick="showPortal()"><svg style="width:18px;height:18px;stroke:currentColor;fill:none"><use href="#i-back"/></svg> Volver</button>
  </div>
</div>
<div id="login-parents" class="login parents-bg hidden">
  <div class="login-card">
    <div class="login-header"><div class="avatar xl avatar-parents"><svg><use href="#av-family"/></svg></div><h2 class="teal">Portal de Padres</h2><p>Segu√≠ el progreso de tus hijos</p></div>
    <div class="form-group"><label>Email</label><input type="email" id="parents-email" placeholder="tu@email.com"></div>
    <div class="form-group"><label>Contrase√±a</label><input type="password" id="parents-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
    <button class="btn btn-teal" onclick="login('parents')">Ingresar</button>
    <button class="back-btn" onclick="showPortal()"><svg style="width:18px;height:18px;stroke:currentColor;fill:none"><use href="#i-back"/></svg> Volver</button>
  </div>
</div>
<div id="login-docente" class="login docente-bg hidden">
  <div class="login-card">
    <div class="login-header"><div class="avatar xl avatar-docente"><svg><use href="#av-teacher"/></svg></div><h2 class="orange">Portal Docente</h2><p>Gesti√≥n y administraci√≥n</p></div>
    <div class="form-group"><label>Email institucional</label><input type="email" id="docente-email" placeholder="profe@rainero.edu"></div>
    <div class="form-group"><label>Contrase√±a</label><input type="password" id="docente-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
    <button class="btn btn-orange" onclick="login('docente')">Ingresar al panel</button>
    <button class="back-btn" onclick="showPortal()"><svg style="width:18px;height:18px;stroke:currentColor;fill:none"><use href="#i-back"/></svg> Volver</button>
  </div>
</div>

<!-- KIDS APP -->
<div id="app-kids" class="app hidden">
  <header class="app-header">
    <button class="header-back" onclick="showPortal()"><svg><use href="#i-back"/></svg></button>
    <img src="logo.png" alt="Logo" class="header-logo">
    <h1 class="header-title">Rainero Kids</h1>
    <div class="header-points"><svg style="width:16px;height:16px;stroke:currentColor;fill:none"><use href="#i-star"/></svg><span id="kids-pts">1,250</span></div>
    <div class="avatar sm avatar-chef"><svg><use href="#av-chef"/></svg></div>
  </header>
  <main class="app-main">
    <div class="card vicente-tip" onclick="showView('kids','chat')">
      <img src="vicente_celu.jpg" alt="Vicente">
      <div class="vicente-tip-content"><div class="vicente-tip-label">üí¨ Tip de Vicente</div><h3 id="vicente-tip-text">¬°Lavate las manos antes de cocinar!</h3><p>Toc√° para charlar conmigo</p></div>
      <span class="tip-tag">Higiene</span>
    </div>
    <div class="card welcome-card">
      <div class="avatar lg avatar-chef"><svg><use href="#av-chef"/></svg></div>
      <div class="welcome-info"><h2>¬°Hola, <span id="kids-name">Chef</span>!</h2><p>Vicente tiene nuevas recetas para vos</p><span class="level-tag"><svg style="width:14px;height:14px;stroke:white;fill:none"><use href="#i-star"/></svg> Chef Junior ¬∑ Nivel 5</span></div>
    </div>
    <div class="stats-row">
      <div class="stat-item"><svg><use href="#i-star"/></svg><div class="value">1,250</div><div class="label">Puntos</div></div>
      <div class="stat-item"><svg><use href="#i-book"/></svg><div class="value" id="kids-recipe-count">0</div><div class="label">Recetas</div></div>
      <div class="stat-item"><svg><use href="#i-medal"/></svg><div class="value">8</div><div class="label">Medallas</div></div>
      <div class="stat-item"><svg><use href="#i-flame"/></svg><div class="value">5</div><div class="label">Racha</div></div>
    </div>
    <div id="kids-home">
      <section class="section"><div class="section-header"><h2 class="section-title">Recetas para vos</h2><button class="section-link" onclick="showView('kids','recetas')">Ver todas ‚Üí</button></div><div class="recipe-grid" id="recipes-grid-home"><div class="loading"><div class="loading-spinner"></div></div></div></section>
      <section class="section"><div class="section-header"><h2 class="section-title">Misiones</h2></div>
        <div class="mission-list">
          <div class="mission-item"><div class="mission-icon photo"><svg><use href="#i-camera"/></svg></div><div class="mission-info"><h4>¬°Sub√≠ una foto!</h4><p>Compart√≠ tu creaci√≥n</p><div class="mission-progress"><div class="mission-progress-fill" style="width:0%"></div></div></div><div class="mission-reward"><div class="pts">+20</div><div class="lbl">pts</div></div></div>
          <div class="mission-item"><div class="mission-icon cook"><svg><use href="#i-book"/></svg></div><div class="mission-info"><h4>Cocinero Semanal</h4><p>Complet√° 3 recetas (2/3)</p><div class="mission-progress"><div class="mission-progress-fill" style="width:66%"></div></div></div><div class="mission-reward"><div class="pts">+100</div><div class="lbl">pts</div></div></div>
          <div class="mission-item"><div class="mission-icon trophy"><svg><use href="#i-trophy"/></svg></div><div class="mission-info"><h4>Desaf√≠o Verano</h4><p>Receta refrescante</p><div class="mission-progress"><div class="mission-progress-fill" style="width:0%"></div></div></div><div class="mission-reward"><div class="pts"><svg style="width:20px;height:20px;stroke:var(--orange);fill:none"><use href="#i-medal"/></svg></div><div class="lbl">medalla</div></div></div>
        </div>
      </section>
    </div>
    <div id="kids-recetas" class="hidden"><section class="section"><div class="section-header"><h2 class="section-title">Todas las Recetas</h2></div><div class="recipe-grid" id="recipes-grid-all"></div></section></div>
    <div id="kids-chat" class="hidden">
      <div class="chat-container">
        <div class="chat-header"><img src="vicente_celu.jpg" alt="Vicente"><div class="chat-header-info"><h3>Vicente</h3><span>Tu amigo cocinero</span></div><div class="chat-status"></div></div>
        <div class="chat-messages" id="chat-msgs"><div class="msg bot"><img src="vicente_solo.jpg" class="msg-avatar"><div class="msg-bubble">¬°Hola! üëã Soy Vicente. ¬øEn qu√© puedo ayudarte hoy?<div class="msg-tip"><div class="msg-tip-label">üí° Dato curioso</div>¬øSab√≠as que las zanahorias antes eran moradas?</div></div></div></div>
        <div class="chat-quick"><button class="quick-chip" onclick="vicenteChat('hygiene')">üßº Higiene</button><button class="quick-chip" onclick="vicenteChat('nutrition')">ü•¶ Nutrici√≥n</button><button class="quick-chip" onclick="vicenteChat('curiosity')">ü§î Curiosidades</button><button class="quick-chip" onclick="vicenteChat('technique')">üç≥ T√©cnicas</button></div>
        <div class="chat-input"><input type="text" id="chat-text" placeholder="Escrib√≠ tu pregunta..." onkeypress="if(event.key==='Enter')sendChat()"><button onclick="sendChat()"><svg><use href="#i-send"/></svg></button></div>
      </div>
    </div>
    <div id="kids-galeria" class="hidden"><section class="section"><div class="section-header"><h2 class="section-title">Mi Galer√≠a</h2></div><div class="gallery-grid" id="gallery-grid"></div></section></div>
    <div id="kids-videos" class="hidden"><section class="section"><div class="section-header"><h2 class="section-title">Aprende con Vicente</h2></div><div class="tabs"><button class="tab active">Videos</button><button class="tab">Infograf√≠as</button><button class="tab">Presentaciones</button></div><div class="video-grid" id="videos-grid"></div></section></div>
  </main>
  <div class="vicente-float" onclick="showView('kids','chat')"><img src="vicente_celu.jpg" alt="Vicente"><div class="dot"></div></div>
  <nav class="app-nav">
    <button class="nav-btn active" onclick="showView('kids','home')"><svg><use href="#i-home"/></svg>Inicio</button>
    <button class="nav-btn" onclick="showView('kids','recetas')"><svg><use href="#i-book"/></svg>Recetas</button>
    <button class="nav-btn" onclick="showView('kids','chat')"><svg><use href="#i-chat"/></svg>Vicente</button>
    <button class="nav-btn" onclick="showView('kids','galeria')"><svg><use href="#i-camera"/></svg>Galer√≠a</button>
    <button class="nav-btn" onclick="showView('kids','videos')"><svg><use href="#i-video"/></svg>Aprender</button>
  </nav>
</div>

<!-- DOCENTE APP -->
<div id="app-docente" class="app hidden">
  <header class="app-header">
    <button class="header-back" onclick="showPortal()"><svg><use href="#i-back"/></svg></button>
    <img src="logo.png" alt="Logo" class="header-logo">
    <h1 class="header-title">Panel Docente</h1>
    <div class="avatar sm avatar-docente"><svg><use href="#av-teacher"/></svg></div>
  </header>
  <main class="app-main">
    <div class="card welcome-card" style="background:var(--grad-orange)">
      <div class="avatar lg" style="background:rgba(255,255,255,0.2);box-shadow:none"><svg><use href="#av-teacher"/></svg></div>
      <div class="welcome-info"><h2>¬°Hola, Profe!</h2><p>Panel de gesti√≥n</p><span class="level-tag" style="background:rgba(255,255,255,0.2)">Receso Verano 2025</span></div>
    </div>
    <div class="docente-stats">
      <div class="docente-stat"><svg><use href="#i-users"/></svg><div class="value">24</div><div class="label">Alumnos Kids</div></div>
      <div class="docente-stat"><svg><use href="#i-users"/></svg><div class="value">18</div><div class="label">Alumnos Teens</div></div>
      <div class="docente-stat"><svg><use href="#i-book"/></svg><div class="value" id="docente-recipe-count">0</div><div class="label">Recetas</div></div>
      <div class="docente-stat"><svg><use href="#i-chat"/></svg><div class="value">8</div><div class="label">Mensajes</div></div>
    </div>
    <div id="docente-home">
      <section class="section"><div class="section-header"><h2 class="section-title">Acciones r√°pidas</h2></div>
        <div class="action-grid">
          <div class="action-btn" onclick="showView('docente','alumnos')"><svg><use href="#i-users"/></svg><span>Alumnos</span></div>
          <div class="action-btn" onclick="showView('docente','recetas')"><svg><use href="#i-book"/></svg><span>Recetas</span></div>
          <div class="action-btn" onclick="showView('docente','contenido')"><svg><use href="#i-video"/></svg><span>Contenido</span></div>
          <div class="action-btn" onclick="showView('docente','mensajes')"><svg><use href="#i-chat"/></svg><span>Mensajes</span></div>
          <div class="action-btn" onclick="showView('docente','galeria')"><svg><use href="#i-camera"/></svg><span>Galer√≠a</span></div>
          <div class="action-btn" onclick="showView('docente','programas')"><svg><use href="#i-calendar"/></svg><span>Programas</span></div>
        </div>
      </section>
      <section class="section"><div class="section-header"><h2 class="section-title">Mensajes recientes</h2></div>
        <div class="message-list">
          <div class="message-item unread"><div class="avatar sm avatar-parents"><svg><use href="#av-family"/></svg></div><div class="message-content"><h4>Pap√° de Martina</h4><p>Consulta sobre el receso de verano...</p></div><div class="message-time">Hoy</div></div>
          <div class="message-item unread"><div class="avatar sm avatar-parents"><svg><use href="#av-family"/></svg></div><div class="message-content"><h4>Mam√° de Lucas</h4><p>¬øHay clases el viernes?</p></div><div class="message-time">Hoy</div></div>
        </div>
      </section>
    </div>
    <div id="docente-alumnos" class="hidden"><section class="section"><div class="section-header"><h2 class="section-title">Alumnos</h2></div><div class="tabs"><button class="tab active">Kids (24)</button><button class="tab">Teens (18)</button></div>
      <div class="student-list">
        <div class="student-item"><div class="avatar avatar-kids"><svg><use href="#av-child"/></svg></div><div class="student-info"><h4>Martina Rodr√≠guez</h4><p>Nivel 5 ¬∑ Chef Junior</p></div><div class="student-stats"><span>‚≠ê 1,250</span><span>üèÖ 8</span></div></div>
        <div class="student-item"><div class="avatar avatar-kids"><svg><use href="#av-child"/></svg></div><div class="student-info"><h4>Tom√°s Garc√≠a</h4><p>Nivel 4 ¬∑ Ayudante</p></div><div class="student-stats"><span>‚≠ê 980</span><span>üèÖ 5</span></div></div>
        <div class="student-item"><div class="avatar avatar-kids"><svg><use href="#av-child"/></svg></div><div class="student-info"><h4>Valentina L√≥pez</h4><p>Nivel 6 ¬∑ Chef Junior</p></div><div class="student-stats"><span>‚≠ê 1,520</span><span>üèÖ 10</span></div></div>
      </div>
    </section></div>
    <div id="docente-recetas" class="hidden"><section class="section"><div class="section-header"><h2 class="section-title">Gestionar Recetas</h2><button class="btn btn-orange btn-sm" onclick="openRecipeForm()"><svg style="width:16px;height:16px;stroke:white;fill:none"><use href="#i-plus"/></svg> Nueva Receta</button></div><div class="recipe-grid" id="docente-recipes-grid"><div class="loading"><div class="loading-spinner"></div></div></div></section></div>
    <div id="docente-contenido" class="hidden"><section class="section"><div class="section-header"><h2 class="section-title">Contenido Educativo</h2></div><div class="tabs"><button class="tab active">Videos</button><button class="tab">Infograf√≠as</button><button class="tab">Presentaciones</button></div><div class="card"><h4 style="margin-bottom:14px">Subir contenido</h4><div class="upload-area"><svg><use href="#i-upload"/></svg><p>Arrastr√° archivos o toc√° para seleccionar</p></div></div><div class="video-grid" id="docente-videos-grid"></div></section></div>
    <div id="docente-mensajes" class="hidden"><section class="section"><div class="section-header"><h2 class="section-title">Mensajes</h2></div>
      <div class="message-list">
        <div class="message-item unread"><div class="avatar sm avatar-parents"><svg><use href="#av-family"/></svg></div><div class="message-content"><h4>Pap√° de Martina</h4><p>Consulta sobre el receso de verano, quer√≠a saber...</p></div><div class="message-time">Hoy 14:30</div></div>
        <div class="message-item unread"><div class="avatar sm avatar-parents"><svg><use href="#av-family"/></svg></div><div class="message-content"><h4>Mam√° de Lucas</h4><p>¬øHay clases el viernes?</p></div><div class="message-time">Hoy 11:15</div></div>
        <div class="message-item"><div class="avatar sm avatar-parents"><svg><use href="#av-family"/></svg></div><div class="message-content"><h4>Pap√° de Sof√≠a</h4><p>Gracias por las fotos de la clase!</p></div><div class="message-time">Ayer</div></div>
      </div>
    </section></div>
    <div id="docente-galeria" class="hidden"><section class="section"><div class="section-header"><h2 class="section-title">Galer√≠a</h2></div><div class="card"><h4 style="margin-bottom:14px">Subir fotos de la clase</h4><div class="upload-area"><svg><use href="#i-camera"/></svg><p>Sub√≠ fotos para compartir con los padres</p></div></div><div class="gallery-grid" id="docente-gallery-grid"></div></section></div>
    <div id="docente-programas" class="hidden"><section class="section"><div class="section-header"><h2 class="section-title">Programas de Receso</h2></div>
      <div class="program-grid">
        <div class="program-card"><div class="program-banner summer"><svg><use href="#i-sun"/></svg><span class="program-tag">Activo</span></div><div class="program-info"><h3>Verano 2025</h3><p>24 inscriptos</p><div class="program-dates"><svg style="width:14px;height:14px;stroke:var(--text-sec);fill:none"><use href="#i-calendar"/></svg> 15 Dic - 28 Feb</div></div></div>
        <div class="program-card"><div class="program-banner winter"><svg><use href="#i-snow"/></svg><span class="program-tag">Pr√≥ximo</span></div><div class="program-info"><h3>Invierno 2025</h3><p>Inscripciones cerradas</p><div class="program-dates"><svg style="width:14px;height:14px;stroke:var(--text-sec);fill:none"><use href="#i-calendar"/></svg> 7 Jul - 25 Jul</div></div></div>
      </div>
    </section></div>
  </main>
  <nav class="app-nav">
    <button class="nav-btn active" onclick="showView('docente','home')"><svg><use href="#i-home"/></svg>Inicio</button>
    <button class="nav-btn" onclick="showView('docente','alumnos')"><svg><use href="#i-users"/></svg>Alumnos</button>
    <button class="nav-btn" onclick="showView('docente','recetas')"><svg><use href="#i-book"/></svg>Recetas</button>
    <button class="nav-btn" onclick="showView('docente','mensajes')"><svg><use href="#i-chat"/></svg>Mensajes</button>
    <button class="nav-btn" onclick="showView('docente','galeria')"><svg><use href="#i-camera"/></svg>Galer√≠a</button>
  </nav>
</div>

<!-- TEENS APP -->
<div id="app-teens" class="app teens-theme hidden">
  <header class="app-header">
    <button class="header-back" onclick="showPortal()"><svg><use href="#i-back"/></svg></button>
    <img src="logo.png" alt="Logo" class="header-logo">
    <h1 class="header-title">Level Up Chef</h1>
    <div class="header-points"><svg style="width:16px;height:16px;stroke:currentColor;fill:none"><use href="#i-flame"/></svg> 3,450 XP</div>
    <div class="avatar sm avatar-teens"><svg><use href="#av-teen"/></svg></div>
  </header>
  <main class="app-main">
    <div class="card welcome-card" style="background:linear-gradient(135deg,rgba(0,206,201,0.85),rgba(122,185,41,0.85))">
      <div class="avatar lg" style="background:rgba(0,0,0,0.15);box-shadow:none"><svg><use href="#av-teen"/></svg></div>
      <div class="welcome-info"><h2>Hey, <span id="teens-name">Chef</span>!</h2><p>Sous Chef en entrenamiento</p><span class="level-tag" style="background:rgba(0,0,0,0.15)"><svg style="width:14px;height:14px;stroke:white;fill:none"><use href="#i-flame"/></svg> Nivel 12</span></div>
    </div>
    <div class="stats-row">
      <div class="stat-item"><svg><use href="#i-flame"/></svg><div class="value">3,450</div><div class="label">XP</div></div>
      <div class="stat-item"><svg><use href="#i-book"/></svg><div class="value">28</div><div class="label">Recetas</div></div>
      <div class="stat-item"><svg><use href="#i-trophy"/></svg><div class="value">15</div><div class="label">Logros</div></div>
      <div class="stat-item"><svg><use href="#i-flame"/></svg><div class="value">12</div><div class="label">Racha</div></div>
    </div>
    <section class="section"><div class="section-header"><h2 class="section-title">Recetas destacadas</h2></div><div class="recipe-grid" id="teens-recipes-grid"></div></section>
  </main>
  <div class="vicente-float" style="border-color:#00CEC9"><img src="vicente_celu.jpg" alt="Vicente"></div>
  <nav class="app-nav">
    <button class="nav-btn active"><svg><use href="#i-home"/></svg>Inicio</button>
    <button class="nav-btn"><svg><use href="#i-book"/></svg>Recetas</button>
    <button class="nav-btn"><svg><use href="#i-chat"/></svg>Vicente</button>
    <button class="nav-btn"><svg><use href="#i-camera"/></svg>Galer√≠a</button>
    <button class="nav-btn"><svg><use href="#i-video"/></svg>Recursos</button>
  </nav>
</div>

<!-- PARENTS APP -->
<div id="app-parents" class="app hidden">
  <header class="app-header">
    <button class="header-back" onclick="showPortal()"><svg><use href="#i-back"/></svg></button>
    <img src="logo.png" alt="Logo" class="header-logo">
    <h1 class="header-title">Portal de Padres</h1>
    <div class="avatar sm avatar-parents"><span class="avatar-initials">MR</span></div>
  </header>
  <main class="app-main">
    <div class="child-card">
      <div class="child-header"><div class="avatar lg avatar-chef"><svg><use href="#av-chef"/></svg></div><div class="child-info"><h3>Martina Rodr√≠guez</h3><span class="child-level"><svg style="width:12px;height:12px;stroke:white;fill:none"><use href="#i-star"/></svg> Chef Junior ¬∑ Nivel 5</span></div></div>
      <div class="child-stats">
        <div class="child-stat"><div class="value">1,250</div><div class="label">Puntos</div></div>
        <div class="child-stat"><div class="value">12</div><div class="label">Recetas</div></div>
        <div class="child-stat"><div class="value">8</div><div class="label">Medallas</div></div>
        <div class="child-stat"><div class="value">95%</div><div class="label">Asistencia</div></div>
      </div>
      <button class="btn btn-teal">Ver progreso completo</button>
    </div>
    <section class="section"><div class="section-header"><h2 class="section-title">Mensajes del docente</h2></div>
      <div class="message-list">
        <div class="message-item unread"><div class="avatar sm avatar-docente"><svg><use href="#av-teacher"/></svg></div><div class="message-content"><h4>Profe Rainero</h4><p>¬°Martina hizo unos cupcakes incre√≠bles hoy!</p></div><div class="message-time">Hoy</div></div>
        <div class="message-item"><div class="avatar sm avatar-docente"><svg><use href="#av-teacher"/></svg></div><div class="message-content"><h4>Profe Rainero</h4><p>Recordatorio: ma√±ana traer delantal</p></div><div class="message-time">Ayer</div></div>
      </div>
    </section>
    <section class="section"><div class="section-header"><h2 class="section-title">Programas inscriptos</h2></div>
      <div class="program-grid">
        <div class="program-card"><div class="program-banner summer"><svg><use href="#i-sun"/></svg><span class="program-tag">Inscripto</span></div><div class="program-info"><h3>Verano 2025</h3><p>Clases de cocina</p><div class="program-dates"><svg style="width:14px;height:14px;stroke:var(--text-sec);fill:none"><use href="#i-calendar"/></svg> 15 Dic - 28 Feb</div></div></div>
        <div class="program-card"><div class="program-banner winter"><svg><use href="#i-snow"/></svg><span class="program-tag">Pr√≥ximo</span></div><div class="program-info"><h3>Invierno 2025</h3><p>Recetas abrigadas</p><div class="program-dates"><svg style="width:14px;height:14px;stroke:var(--text-sec);fill:none"><use href="#i-calendar"/></svg> 7 Jul - 25 Jul</div></div></div>
      </div>
    </section>
  </main>
</div>

<!-- RECIPE VIEW MODAL -->
<div id="recipe-modal" class="modal-overlay hidden" onclick="closeRecipeModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-header"><h2 id="modal-recipe-title">Receta</h2><button class="modal-close" onclick="closeRecipeModal()"><svg><use href="#i-x"/></svg></button></div>
    <div class="modal-body" id="modal-recipe-body"></div>
    <div class="modal-footer"><button class="btn btn-green" onclick="completeRecipe()">¬°Preparar! +50 pts</button></div>
  </div>
</div>

<!-- RECIPE FORM MODAL (Docente) -->
<div id="recipe-form-modal" class="modal-overlay hidden" onclick="closeRecipeForm()">
  <div class="modal" onclick="event.stopPropagation()" style="max-height:95vh">
    <div class="modal-header"><h2 id="form-title">Nueva Receta</h2><button class="modal-close" onclick="closeRecipeForm()"><svg><use href="#i-x"/></svg></button></div>
    <div class="recipe-form">
      <div class="form-group"><label>Nombre de la receta *</label><input type="text" id="recipe-name" placeholder="Ej: Cupcakes de Vainilla"></div>
      <div class="form-group"><label>Descripci√≥n</label><textarea id="recipe-desc" placeholder="Una breve descripci√≥n de la receta..." style="min-height:80px;width:100%;padding:14px;border:2px solid var(--border);border-radius:var(--radius);font-family:inherit;resize:vertical"></textarea></div>
      <div class="form-row">
        <div class="form-group"><label>Tiempo (minutos) *</label><input type="number" id="recipe-time" placeholder="30" min="5" max="180"></div>
        <div class="form-group"><label>Dificultad *</label><select id="recipe-difficulty"><option value="easy">F√°cil</option><option value="medium">Medio</option><option value="hard">Dif√≠cil</option></select></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Puntos</label><input type="number" id="recipe-points" placeholder="50" min="10" max="200"></div>
        <div class="form-group"><label>Emoji</label><input type="text" id="recipe-emoji" placeholder="üßÅ" maxlength="4"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Categor√≠a</label><select id="recipe-category"><option value="postre">Postre</option><option value="plato principal">Plato principal</option><option value="entrada">Entrada</option><option value="snack">Snack</option><option value="desayuno">Desayuno</option><option value="bebida">Bebida</option></select></div>
        <div class="form-group"><label>Para qui√©n</label><select id="recipe-audience"><option value="all">Todos</option><option value="kids">Solo Kids</option><option value="teens">Solo Teens</option></select></div>
      </div>
      <div class="form-section"><h4>Ingredientes *</h4><div id="ingredients-list"><div class="ingredient-input-row"><input type="text" placeholder="Ej: 2 tazas de harina" class="ingredient-input"><button type="button" class="btn btn-icon btn-outline" onclick="addIngredientRow()"><svg style="width:18px;height:18px;stroke:currentColor;fill:none"><use href="#i-plus"/></svg></button></div></div></div>
      <div class="form-section"><h4>Pasos de preparaci√≥n *</h4><div id="steps-list"><div class="step-input-row"><textarea placeholder="Paso 1: Precalentar el horno a 180¬∞C" class="step-input"></textarea></div></div><button type="button" class="btn btn-outline btn-sm" onclick="addStepRow()" style="margin-top:10px"><svg style="width:14px;height:14px;stroke:currentColor;fill:none"><use href="#i-plus"/></svg> Agregar paso</button></div>
      <div style="display:flex;gap:12px;margin-top:20px">
        <button type="button" class="btn btn-outline" onclick="closeRecipeForm()" style="flex:1">Cancelar</button>
        <button type="button" class="btn btn-orange" onclick="saveRecipe()" style="flex:2">Guardar Receta</button>
      </div>
    </div>
  </div>
</div>

<!-- TOAST -->
<div id="toast" class="toast hidden"></div>

<script>
// =====================================================
// SUPABASE CONFIG - CAMBIAR ESTOS VALORES
// =====================================================
const SUPABASE_URL = 'https://dukgjrhyhyxvdqzhthje.supabase.co'; // ej: https://xxxxx.supabase.co
const SUPABASE_ANON_KEY = 'sb_publishable_hdrC91CO7zGc3uoO2MsMVA_6K_CQmgd';

// Inicializar Supabase (si est√° configurado)
let db = null;
let isSupabaseConfigured = false;

if (SUPABASE_URL !== 'TU_SUPABASE_URL' && SUPABASE_ANON_KEY !== 'TU_SUPABASE_ANON_KEY') {
  try {
    db = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    isSupabaseConfigured = true;
    console.log('‚úÖ Supabase conectado');
  } catch (e) {
    console.log('‚ö†Ô∏è Error conectando Supabase:', e);
  }
}

// =====================================================
// DATA LOCAL (fallback si no hay Supabase)
// =====================================================
let localRecipes = [
  {id:'1',title:'Cupcakes de Vainilla',description:'Deliciosos cupcakes esponjosos',emoji:'üßÅ',time_minutes:30,difficulty:'easy',points:50,category:'postre',ingredients:['2 tazas de harina','1 taza de az√∫car','2 huevos','1/2 taza de manteca','1 taza de leche','1 cdita de vainilla'],steps:['Precalentar el horno a 180¬∞C','Mezclar ingredientes secos','Agregar h√∫medos y batir','Colocar en moldes','Hornear 20-25 min']},
  {id:'2',title:'Galletas con Chips',description:'Galletas crujientes con chocolate',emoji:'üç™',time_minutes:25,difficulty:'easy',points:40,category:'postre',ingredients:['2 tazas de harina','1 taza de az√∫car morena','1 huevo','Chips de chocolate'],steps:['Mezclar manteca y az√∫car','Agregar huevo','Incorporar harina','Agregar chips','Hornear 12 min a 175¬∞C']},
  {id:'3',title:'Mini Pizzas',description:'Pizzas personales para armar',emoji:'üçï',time_minutes:45,difficulty:'medium',points:80,category:'plato principal',ingredients:['Masa para pizza','Salsa de tomate','Queso mozzarella','Jam√≥n'],steps:['Estirar la masa','Agregar salsa','Poner queso y toppings','Hornear 15 min a 200¬∞C']},
  {id:'4',title:'Pancakes Esponjosos',description:'Perfectos para el desayuno',emoji:'ü•û',time_minutes:20,difficulty:'easy',points:35,category:'desayuno',ingredients:['1 taza de harina','1 huevo','1 taza de leche','2 cdas de az√∫car'],steps:['Mezclar secos','Agregar huevo y leche','Cocinar en sart√©n caliente','Dar vuelta cuando haga burbujas']},
  {id:'5',title:'Ensalada Arco√≠ris',description:'Colorida y nutritiva',emoji:'ü•ó',time_minutes:15,difficulty:'easy',points:30,category:'entrada',ingredients:['Lechuga','Tomate cherry','Zanahoria rallada','Choclo'],steps:['Lavar las verduras','Cortar en trozos','Mezclar todo','Agregar aderezo']},
  {id:'6',title:'Tacos Caseros',description:'Con todos los toppings',emoji:'üåÆ',time_minutes:40,difficulty:'medium',points:70,category:'plato principal',ingredients:['Tortillas','Carne picada','Lechuga','Tomate','Crema'],steps:['Cocinar la carne','Picar verduras','Calentar tortillas','Armar los tacos']}
];

let localTips = [
  {category:'hygiene',tip_text:'¬°Lavarse las manos es S√öPER importante! 20 segundos con jab√≥n.',emoji:'üßº'},
  {category:'hygiene',tip_text:'Siempre limpi√° tu √°rea de trabajo antes y despu√©s de cocinar.',emoji:'üßΩ'},
  {category:'nutrition',tip_text:'¬°Las verduras son superpoderes! Verdes = energ√≠a, naranjas = vista.',emoji:'ü•¶'},
  {category:'nutrition',tip_text:'Intent√° comer 5 colores cada d√≠a. ¬°Un arco√≠ris en tu plato!',emoji:'üåà'},
  {category:'curiosity',tip_text:'¬øSab√≠as que las papas fritas fueron inventadas por accidente?',emoji:'üçü'},
  {category:'curiosity',tip_text:'Las zanahorias originalmente eran de color morado.',emoji:'ü•ï'},
  {category:'technique',tip_text:'Siempre le√© la receta completa antes de empezar a cocinar.',emoji:'üìñ'},
  {category:'technique',tip_text:'Prepar√° todos los ingredientes antes de empezar (mise en place).',emoji:'ü•£'}
];

let localVideos = [
  {id:'1',title:'Higiene en la Cocina',description:'Reglas importantes',duration:'5:32',category:'higiene',color:'var(--grad-violet)'},
  {id:'2',title:'Alimentaci√≥n Saludable',description:'¬øPor qu√© las verduras?',duration:'4:15',category:'nutrici√≥n',color:'var(--grad-green)'},
  {id:'3',title:'T√©cnicas de Corte',description:'Cortar de forma segura',duration:'6:45',category:'t√©cnicas',color:'var(--grad-orange)'}
];

let localGallery = [
  {emoji:'üßÅ',color:'var(--grad-teal)'},
  {emoji:'üç™',color:'var(--grad-orange)'},
  {emoji:'üçï',color:'linear-gradient(135deg,#F87171,#FB923C)'},
  {emoji:'ü•ó',color:'var(--grad-green)'},
  {emoji:'üç∞',color:'var(--grad-violet)'}
];

const gradients = ['var(--grad-teal)','var(--grad-violet)','var(--grad-green)','var(--grad-orange)','linear-gradient(135deg,#F87171,#FB923C)','linear-gradient(135deg,#60A5FA,#3B82F6)'];

// =====================================================
// NAVIGATION
// =====================================================
function hideAll(){document.querySelectorAll('.portal,.login,.app').forEach(e=>e.classList.add('hidden'))}
function showPortal(){hideAll();document.getElementById('portal').classList.remove('hidden')}
function showLogin(type){hideAll();document.getElementById('login-'+type).classList.remove('hidden')}

function login(type){
  const userInput=document.getElementById(type+'-user')||document.getElementById(type+'-email');
  const name=userInput?userInput.value||'Chef':'Chef';
  hideAll();
  document.getElementById('app-'+type).classList.remove('hidden');
  const nameEl=document.getElementById(type+'-name');
  if(nameEl)nameEl.textContent=name;
  initApp(type);
}

function showView(app,view){
  const appEl=document.getElementById('app-'+app);
  appEl.querySelectorAll('[id^="'+app+'-"]').forEach(e=>e.classList.add('hidden'));
  const viewEl=document.getElementById(app+'-'+view);
  if(viewEl)viewEl.classList.remove('hidden');
  appEl.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  if(event&&event.currentTarget)event.currentTarget.classList.add('active');
}

// =====================================================
// APP INITIALIZATION
// =====================================================
async function initApp(type){
  await loadRecipes();
  renderRecipes();
  renderVideos();
  renderGallery();
  loadRandomTip();
  updateCounts();
}

async function loadRecipes(){
  if(isSupabaseConfigured){
    try{
      const{data,error}=await db.from('recipes').select('*,recipe_ingredients(*),recipe_steps(*)').eq('is_published',true).order('created_at',{ascending:false});
      if(!error&&data){
        localRecipes=data.map(r=>({
          ...r,
          ingredients:r.recipe_ingredients?r.recipe_ingredients.sort((a,b)=>a.order_index-b.order_index).map(i=>i.quantity?`${i.quantity} ${i.ingredient}`:i.ingredient):[],
          steps:r.recipe_steps?r.recipe_steps.sort((a,b)=>a.step_number-b.step_number).map(s=>s.instruction):[]
        }));
        console.log('‚úÖ Recetas cargadas de Supabase:',localRecipes.length);
      }
    }catch(e){console.log('Error cargando recetas:',e)}
  }
}

function updateCounts(){
  const count=localRecipes.length;
  ['kids-recipe-count','docente-recipe-count'].forEach(id=>{
    const el=document.getElementById(id);
    if(el)el.textContent=count;
  });
}

// =====================================================
// RENDER FUNCTIONS
// =====================================================
function renderRecipes(){
  const html=localRecipes.map((r,i)=>`
    <div class="recipe-card" onclick="openRecipe('${r.id}')">
      <div class="recipe-img" style="background:${gradients[i%gradients.length]}">
        <span class="recipe-emoji">${r.emoji||'üçΩÔ∏è'}</span>
        <span class="recipe-badge ${r.difficulty}">${r.difficulty==='easy'?'F√°cil':r.difficulty==='medium'?'Medio':'Dif√≠cil'}</span>
      </div>
      <div class="recipe-info">
        <h3>${r.title}</h3>
        <div class="recipe-meta"><svg><use href="#i-clock"/></svg>${r.time_minutes} min</div>
        <span class="recipe-points"><svg style="width:12px;height:12px;stroke:var(--orange);fill:none"><use href="#i-star"/></svg>+${r.points}</span>
      </div>
    </div>
  `).join('');
  
  ['recipes-grid-home','recipes-grid-all','docente-recipes-grid','teens-recipes-grid'].forEach(id=>{
    const el=document.getElementById(id);
    if(el){
      if(id==='recipes-grid-home'){
        el.innerHTML=localRecipes.slice(0,4).map((r,i)=>`
          <div class="recipe-card" onclick="openRecipe('${r.id}')">
            <div class="recipe-img" style="background:${gradients[i%gradients.length]}"><span class="recipe-emoji">${r.emoji||'üçΩÔ∏è'}</span><span class="recipe-badge ${r.difficulty}">${r.difficulty==='easy'?'F√°cil':r.difficulty==='medium'?'Medio':'Dif√≠cil'}</span></div>
            <div class="recipe-info"><h3>${r.title}</h3><div class="recipe-meta"><svg><use href="#i-clock"/></svg>${r.time_minutes} min</div><span class="recipe-points"><svg style="width:12px;height:12px;stroke:var(--orange);fill:none"><use href="#i-star"/></svg>+${r.points}</span></div>
          </div>
        `).join('');
      }else{
        el.innerHTML=html;
      }
    }
  });
}

function renderVideos(){
  const html=localVideos.map(v=>`
    <div class="video-card">
      <div class="video-thumb" style="background:${v.color}"><div class="video-play"><svg><use href="#i-play"/></svg></div><span class="video-duration">${v.duration}</span></div>
      <div class="video-info"><h3>${v.title}</h3><p>${v.description}</p><div class="video-vicente"><img src="vicente_solo.jpg">Con Vicente</div></div>
    </div>
  `).join('');
  ['videos-grid','docente-videos-grid'].forEach(id=>{const el=document.getElementById(id);if(el)el.innerHTML=html;});
}

function renderGallery(){
  const addHtml=`<div class="gallery-item add" onclick="showToast('üì∏ Funci√≥n pr√≥ximamente')"><svg><use href="#i-plus"/></svg><span>Subir</span></div>`;
  const itemsHtml=localGallery.map(g=>`<div class="gallery-item" style="background:${g.color}">${g.emoji}</div>`).join('');
  ['gallery-grid','docente-gallery-grid'].forEach(id=>{
    const el=document.getElementById(id);
    if(el)el.innerHTML=id==='gallery-grid'?addHtml+itemsHtml:itemsHtml;
  });
}

function loadRandomTip(){
  const tip=localTips[Math.floor(Math.random()*localTips.length)];
  const tipEl=document.getElementById('vicente-tip-text');
  if(tipEl)tipEl.textContent=tip.tip_text;
}

// =====================================================
// RECIPE MODAL
// =====================================================
let currentRecipeId=null;

function openRecipe(id){
  const r=localRecipes.find(x=>x.id===id||x.id===parseInt(id));
  if(!r)return;
  currentRecipeId=id;
  document.getElementById('modal-recipe-title').textContent=r.title;
  const idx=localRecipes.indexOf(r);
  document.getElementById('modal-recipe-body').innerHTML=`
    <div class="modal-img" style="background:${gradients[idx%gradients.length]}"><span class="recipe-emoji">${r.emoji||'üçΩÔ∏è'}</span></div>
    ${r.description?`<p style="color:var(--text-sec);margin-bottom:18px">${r.description}</p>`:''}
    <div class="recipe-detail-meta">
      <div class="meta-item"><svg><use href="#i-clock"/></svg>${r.time_minutes} min</div>
      <div class="meta-item"><svg><use href="#i-star"/></svg>${r.points} pts</div>
      <div class="meta-item"><svg><use href="#i-book"/></svg>${r.difficulty==='easy'?'F√°cil':r.difficulty==='medium'?'Medio':'Dif√≠cil'}</div>
    </div>
    <div class="recipe-section"><h3><svg><use href="#i-list"/></svg> Ingredientes</h3><ul class="ingredient-list">${(r.ingredients||[]).map(i=>`<li><div class="ingredient-check" onclick="this.classList.toggle('checked')"></div>${i}</li>`).join('')}</ul></div>
    <div class="recipe-section"><h3><svg><use href="#i-check"/></svg> Preparaci√≥n</h3><div class="step-list">${(r.steps||[]).map((s,i)=>`<div class="step-item"><div class="step-number">${i+1}</div><div class="step-content">${s}</div></div>`).join('')}</div></div>
  `;
  document.getElementById('recipe-modal').classList.remove('hidden');
}

function closeRecipeModal(){document.getElementById('recipe-modal').classList.add('hidden')}

function completeRecipe(){
  showToast('üéâ ¬°Receta completada! +50 puntos');
  closeRecipeModal();
}

// =====================================================
// RECIPE FORM (DOCENTE)
// =====================================================
let editingRecipeId=null;

function openRecipeForm(id=null){
  editingRecipeId=id;
  document.getElementById('form-title').textContent=id?'Editar Receta':'Nueva Receta';
  if(id){
    const r=localRecipes.find(x=>x.id===id);
    if(r){
      document.getElementById('recipe-name').value=r.title||'';
      document.getElementById('recipe-desc').value=r.description||'';
      document.getElementById('recipe-time').value=r.time_minutes||30;
      document.getElementById('recipe-difficulty').value=r.difficulty||'easy';
      document.getElementById('recipe-points').value=r.points||50;
      document.getElementById('recipe-emoji').value=r.emoji||'üçΩÔ∏è';
      document.getElementById('recipe-category').value=r.category||'postre';
      document.getElementById('recipe-audience').value=r.target_audience||'all';
      // Ingredientes
      const ingList=document.getElementById('ingredients-list');
      ingList.innerHTML=(r.ingredients||[]).map((ing,i)=>`<div class="ingredient-input-row"><input type="text" value="${ing}" class="ingredient-input"><button type="button" class="btn btn-icon btn-outline" onclick="${i===0?'addIngredientRow()':'this.parentElement.remove()'}"><svg style="width:18px;height:18px;stroke:currentColor;fill:none"><use href="#${i===0?'i-plus':'i-x'}"/></svg></button></div>`).join('')||`<div class="ingredient-input-row"><input type="text" placeholder="Ej: 2 tazas de harina" class="ingredient-input"><button type="button" class="btn btn-icon btn-outline" onclick="addIngredientRow()"><svg style="width:18px;height:18px;stroke:currentColor;fill:none"><use href="#i-plus"/></svg></button></div>`;
      // Pasos
      const stepsList=document.getElementById('steps-list');
      stepsList.innerHTML=(r.steps||[]).map((s,i)=>`<div class="step-input-row"><textarea class="step-input" placeholder="Paso ${i+1}:">${s}</textarea></div>`).join('')||`<div class="step-input-row"><textarea placeholder="Paso 1:" class="step-input"></textarea></div>`;
    }
  }else{
    resetRecipeForm();
  }
  document.getElementById('recipe-form-modal').classList.remove('hidden');
}

function closeRecipeForm(){
  document.getElementById('recipe-form-modal').classList.add('hidden');
  resetRecipeForm();
}

function resetRecipeForm(){
  ['recipe-name','recipe-desc','recipe-time','recipe-points','recipe-emoji'].forEach(id=>document.getElementById(id).value='');
  document.getElementById('recipe-difficulty').value='easy';
  document.getElementById('recipe-category').value='postre';
  document.getElementById('recipe-audience').value='all';
  document.getElementById('ingredients-list').innerHTML=`<div class="ingredient-input-row"><input type="text" placeholder="Ej: 2 tazas de harina" class="ingredient-input"><button type="button" class="btn btn-icon btn-outline" onclick="addIngredientRow()"><svg style="width:18px;height:18px;stroke:currentColor;fill:none"><use href="#i-plus"/></svg></button></div>`;
  document.getElementById('steps-list').innerHTML=`<div class="step-input-row"><textarea placeholder="Paso 1:" class="step-input"></textarea></div>`;
  editingRecipeId=null;
}

function addIngredientRow(){
  const list=document.getElementById('ingredients-list');
  const div=document.createElement('div');
  div.className='ingredient-input-row';
  div.innerHTML=`<input type="text" placeholder="Ingrediente" class="ingredient-input"><button type="button" class="btn btn-icon btn-outline" onclick="this.parentElement.remove()"><svg style="width:18px;height:18px;stroke:currentColor;fill:none"><use href="#i-x"/></svg></button>`;
  list.appendChild(div);
}

function addStepRow(){
  const list=document.getElementById('steps-list');
  const n=list.children.length+1;
  const div=document.createElement('div');
  div.className='step-input-row';
  div.innerHTML=`<textarea placeholder="Paso ${n}:" class="step-input"></textarea>`;
  list.appendChild(div);
}

async function saveRecipe(){
  const title=document.getElementById('recipe-name').value.trim();
  const description=document.getElementById('recipe-desc').value.trim();
  const time=parseInt(document.getElementById('recipe-time').value)||30;
  const difficulty=document.getElementById('recipe-difficulty').value;
  const points=parseInt(document.getElementById('recipe-points').value)||50;
  const emoji=document.getElementById('recipe-emoji').value.trim()||'üçΩÔ∏è';
  const category=document.getElementById('recipe-category').value;
  const audience=document.getElementById('recipe-audience').value;
  
  const ingredients=[...document.querySelectorAll('.ingredient-input')].map(i=>i.value.trim()).filter(Boolean);
  const steps=[...document.querySelectorAll('.step-input')].map(s=>s.value.trim()).filter(Boolean);
  
  if(!title){showToast('‚ùå Ingres√° un nombre para la receta');return;}
  if(ingredients.length===0){showToast('‚ùå Agreg√° al menos un ingrediente');return;}
  if(steps.length===0){showToast('‚ùå Agreg√° al menos un paso');return;}
  
  if(isSupabaseConfigured){
    try{
      if(editingRecipeId){
        // Update
        const{error}=await db.from('recipes').update({title,description,time_minutes:time,difficulty,points,emoji,category,target_audience:audience,updated_at:new Date().toISOString()}).eq('id',editingRecipeId);
        if(error)throw error;
        // Update ingredients
        await db.from('recipe_ingredients').delete().eq('recipe_id',editingRecipeId);
        for(let i=0;i<ingredients.length;i++){
          await db.from('recipe_ingredients').insert({recipe_id:editingRecipeId,ingredient:ingredients[i],order_index:i});
        }
        // Update steps
        await db.from('recipe_steps').delete().eq('recipe_id',editingRecipeId);
        for(let i=0;i<steps.length;i++){
          await db.from('recipe_steps').insert({recipe_id:editingRecipeId,step_number:i+1,instruction:steps[i]});
        }
        showToast('‚úÖ Receta actualizada');
      }else{
        // Insert
        const{data,error}=await db.from('recipes').insert({title,description,time_minutes:time,difficulty,points,emoji,category,target_audience:audience}).select().single();
        if(error)throw error;
        // Insert ingredients
        for(let i=0;i<ingredients.length;i++){
          await db.from('recipe_ingredients').insert({recipe_id:data.id,ingredient:ingredients[i],order_index:i});
        }
        // Insert steps
        for(let i=0;i<steps.length;i++){
          await db.from('recipe_steps').insert({recipe_id:data.id,step_number:i+1,instruction:steps[i]});
        }
        showToast('‚úÖ Receta guardada en Supabase');
      }
      await loadRecipes();
      renderRecipes();
      updateCounts();
    }catch(e){
      console.log('Error guardando:',e);
      showToast('‚ùå Error guardando en Supabase');
    }
  }else{
    // Local save
    const newRecipe={id:editingRecipeId||Date.now().toString(),title,description,time_minutes:time,difficulty,points,emoji,category,target_audience:audience,ingredients,steps};
    if(editingRecipeId){
      const idx=localRecipes.findIndex(r=>r.id===editingRecipeId);
      if(idx>=0)localRecipes[idx]=newRecipe;
    }else{
      localRecipes.unshift(newRecipe);
    }
    renderRecipes();
    updateCounts();
    showToast('‚úÖ Receta guardada localmente');
  }
  closeRecipeForm();
}

// =====================================================
// CHAT
// =====================================================
function vicenteChat(category){
  const tips=localTips.filter(t=>t.category===category);
  const tip=tips[Math.floor(Math.random()*tips.length)]||localTips[0];
  addChatMsg('bot',`${tip.emoji} ${tip.tip_text}`);
}

function sendChat(){
  const input=document.getElementById('chat-text');
  const text=input.value.trim();
  if(!text)return;
  addChatMsg('user',text);
  input.value='';
  setTimeout(()=>{
    const lower=text.toLowerCase();
    let cat='curiosity';
    if(lower.includes('lavar')||lower.includes('higiene')||lower.includes('limpi'))cat='hygiene';
    else if(lower.includes('verdura')||lower.includes('salud')||lower.includes('nutri'))cat='nutrition';
    else if(lower.includes('receta')||lower.includes('cocin')||lower.includes('t√©cnica'))cat='technique';
    vicenteChat(cat);
  },600);
}

function addChatMsg(type,text){
  const container=document.getElementById('chat-msgs');
  const div=document.createElement('div');
  div.className='msg '+type;
  if(type==='bot'){
    div.innerHTML=`<img src="vicente_solo.jpg" class="msg-avatar"><div class="msg-bubble">${text}</div>`;
  }else{
    div.innerHTML=`<div class="msg-avatar"><svg><use href="#av-chef"/></svg></div><div class="msg-bubble">${text}</div>`;
  }
  container.appendChild(div);
  container.scrollTop=container.scrollHeight;
}

// =====================================================
// UTILITIES
// =====================================================
function showToast(message){
  const toast=document.getElementById('toast');
  toast.textContent=message;
  toast.classList.remove('hidden');
  setTimeout(()=>toast.classList.add('hidden'),3000);
}

// =====================================================
// PWA
// =====================================================
if('serviceWorker' in navigator){
  window.addEventListener('load',()=>{
    navigator.serviceWorker.register('/sw.js').catch(()=>{});
  });
}

// Init
showPortal();
</script>
</body>
</html>
